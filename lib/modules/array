# "a string" "${array[@]}"
function array.contains {
	local e;
	for e in "${@:2}"; do [[ "$e" == "$1" ]] && return 0; done
	return 1;
}

function array.join {
	#TODO: strip leading delimiter
	local delimiter="${1:-,}";
	local elements=( "${@:2}" );
	_result=$(printf "${delimiter}%s" "${elements[@]}");
}


function array.isarray {
	local name="$1";
	set +o errexit;
	declare -p "$name" 2> /dev/null | grep -q 'declare \-a';
	local exists="$?";
	set -o errexit;
	_result="$exists";
}

function array.isassoc {
	local name="$1";
	set +o errexit;
	declare -p "$name" 2> /dev/null | grep -q 'declare \-A';
	local exists="$?";
	set -o errexit;
	_result="$exists";
}

# TODO: rename to array.last as it cannot pop
function array.pop {
	#local arr=( "$@" );
	#_result=arr[${#arr[@]}-1];
	#unset arr[${#arr[@]}-1];
	
	#echo "1: $1";
	#echo "2: $2";
	
	local opts=( "$@" );	
	_result=${opts[${#opts[@]}-1]};
	unset opts[${#opts[@]}-1];
	#echo "got opts: ${opts[@]}";
	#echo "got opts length: ${#opts[@]}";
	
	#_result="";
	
	#while [ $# -gt 0 ]
	#	do
	#		_result="$1";			
	#		shift;
	#		echo "shifted..."
	#done
}