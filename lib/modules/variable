function variable_get {
	local name="$1";
	set +o nounset;
	variable_is_array "$name";
	local isarray="$_result";
	if [ $isarray -eq 0 ]; then
		eval value=\${"$name"[@]};
	else
		eval value="$"$name;
	fi
	_result="$value";
	set -o nounset;
}

function variable_set {
	local name="$1";
	local value="$2";
	
	#echo "variable_set: $name : $value";
	
	eval "$name"="'$value'";
	
	#variable_get "$name";
	#echo "$_result";
}

function variable_declare {
	local name="$1";
	local value="$2";
	local options="${3:-}";
	if [ ! -z "$options" ]; then
		options="-${options}";
	fi
	local expression="declare $options $name";
	eval $expression;
	variable_set "$name" "$value";
	
	#echo "variable_declare: $name";
}

function variable_is_array {
	local name="$1";
	set +o errexit;
	declare -p "$name" 2> /dev/null | grep -q 'declare \-a';
	local exists="$?";
	set -o errexit;
	_result="$exists";
}


function variable_unset {
	local prefix="$1";
	local expression="\${!${prefix}_*}";
	local opt;
	for opt in "$expression"
		do
			unset "$opt";
	done
}