function rlx.shell {
	if [ ! -t 0 ] || [ ! -t 1 ] || [ ! -t 2 ]; then
		console.quit 1 "$process_name shell must be run from a tty";
	fi
	
	host="${1:-}";
	
	# TODO: add prompt to specify the host?
	if [ $# -eq 0 ]; then
		console.quit 1 "no host specified";
	fi
	
	# TODO: test if db-name has been specified
	
	console.info "host %s" "$host";
	console.info "fetching database list from %s" "$host";
	
	rlx.run couchdb.db.list "$host";
}

function rlx.shell.db {
	# list available databases
	if [ $# -eq 0 ]; then
		local db;
		for db in "${databases[@]}"
			do
				console.info "$db";
		done
	else
		local cmd="${1:-}";
		shift;
		if ! method.exists? "rlx.shell.db.${cmd}"; then
			console.warn "invalid db command %s" "$cmd";
		fi
		"rlx.shell.db.${cmd}" "$@";
	fi
}

function rlx.shell.db.add {
	local name="${1:-}";
	if ! couchdb.db.name.valid? "$name"; then
		console.warn "invalid database name %s" "$name";
		return 0;
	fi
	
	# histappend     	off
	# histreedit     	off
	# histverify     	off	
	
	echo "$FUNCNAME : $*";
}

function rlx.shell.db.rm {
	echo "$FUNCNAME : $*";
}

function rlx.shell.help {
	help.man.show "default";
}

# quit the shell
function rlx.shell.quit {
	console.success;
}

# alias for the `quit` command
function rlx.shell.exit {
	console.success;
}