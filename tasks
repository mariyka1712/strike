require 'executable';

function tasks.initialize {
	executable validate 'ronn' 'git';
}

function tasks.clean {
	rmdir "${target}";
}

function tasks.doc {
	local ronn="${executables[ronn]}";
	local git="${executables[git]}";
	local man="${target}/man";
	mkdirp "$man";
	
	# copy all source .ronn to target/man
	local cmd="cp "${root}/doc/*.ronn" "${man}"";
	eval "$cmd";
	
	$git checkout gh-pages || quit 1 "could not checkout pages branch, may be dirty"
	
	#ronn -w -s toc -r5 --markdown man/*.ronn
}